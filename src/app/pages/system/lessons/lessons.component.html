<section class="mt-3 mt-md-5 p-2 p-md-3">
  <div class="container-fluid">
    <!-- Header with responsive button -->
    <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-3 mb-md-4">
      <button class="btn btn-custom-primary btn-desktop-compact" (click)="openCreateLesson()">
        <i class="bi bi-calendar-plus me-2"></i>Nova Aula
      </button>
    </div>

    <!-- Responsive table wrapper -->
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th scope="col" class="d-none d-lg-table-cell">Título</th>
            <th scope="col" class="d-table-cell d-lg-none">Aula</th>
            <th scope="col" class="d-none d-xl-table-cell">Descrição</th>
            <th scope="col" class="d-none d-md-table-cell">Início</th>
            <th scope="col" class="d-none d-lg-table-cell">Duração</th>
            <th scope="col" class="d-none d-md-table-cell">Status</th>
            <th scope="col" class="text-center">Ações</th>
          </tr>
        </thead>
        <tbody>
          @for(lesson of lessons; track lesson.id){
          <tr>
            <!-- Desktop view - full title -->
            <td class="d-none d-lg-table-cell">
              <div>
                <strong class="text-primary">{{lesson.title}}</strong>
              </div>
            </td>
            
            <!-- Mobile/Tablet view - condensed info -->
            <td class="d-table-cell d-lg-none">
              <div>
                <strong class="text-primary d-block">{{lesson.title}}</strong>
                <small class="text-muted d-block d-xl-none">{{lesson.description}}</small>
                <div class="d-flex flex-wrap gap-1 mt-1">
                  <span class="badge bg-outline-info text-info border d-md-none">
                    <i class="bi bi-calendar me-1"></i>{{lesson.scheduledDate | date:'dd/MM/yyyy HH:mm'}}
                  </span>
                  <span class="badge bg-outline-secondary text-dark border d-lg-none">{{lesson.duration}}</span>
                  <span class="badge {{lesson.isActive ? 'bg-outline-success text-success' : 'bg-outline-danger text-danger'}} border d-md-none">
                    {{lesson.isActive ? 'Ativa' : 'Inativa'}}
                  </span>
                </div>
              </div>
            </td>
            
            <td class="d-none d-xl-table-cell">
              <small class="text-muted">{{lesson.description}}</small>
            </td>
            <td class="d-none d-md-table-cell">
              <small>
                <i class="bi bi-calendar me-1"></i>{{lesson.scheduledDate | date:'dd/MM/yyyy HH:mm'}}
              </small>
            </td>
            <td class="d-none d-lg-table-cell">
              <span class="badge bg-outline-info text-info border">{{lesson.duration}}</span>
            </td>
            <td class="d-none d-md-table-cell">
              <span class="badge {{lesson.isActive ? 'bg-outline-success text-success' : 'bg-outline-danger text-danger'}} border">
                {{lesson.isActive ? 'Ativa' : 'Inativa'}}
              </span>
            </td>
            <td class="text-center">
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-sm btn-outline-primary" (click)="openUpdateLesson(lesson)" title="Editar">
                  <img src="../../../../assets/icons/structural-icons/pencil-square.svg" alt="Editar" style="width: 16px; height: 16px;" />
                </button>
                <button type="button" class="btn btn-sm btn-outline-danger" (click)="deleteLesson(lesson)" title="Excluir">
                  <img src="../../../../assets/icons/structural-icons/trash.svg" alt="Excluir" style="width: 16px; height: 16px;" />
                </button>
              </div>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Empty state -->
    @if (lessons.length === 0) {
      <div class="text-center py-5">
        <div class="mb-3">
          <i class="bi bi-calendar3 display-1 text-muted"></i>
        </div>
        <h5 class="text-muted">Nenhuma aula encontrada</h5>
        <p class="text-muted">Clique em "Nova Aula" para agendar a primeira aula.</p>
      </div>
    }
  </div>
</section>

@if(openedCreateLesson){
<app-create-lesson (closeEvent)="closeCreateLesson()" (lessonCreated)="onLessonCreated()">
</app-create-lesson>
}

@if(openedUpdateLesson){
<app-update-lesson [lesson]="selectedLesson" (closeEvent)="closeUpdateLesson()" (lessonUpdated)="onLessonUpdated()">
</app-update-lesson>
}

